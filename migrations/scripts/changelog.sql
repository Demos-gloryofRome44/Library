CREATE TABLE Person (
   id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   name VARCHAR(30) NOT NULL,
   age int NOT NULL CHECK (age > 0),
   email VARCHAR(255) NOT NULL,
   CONSTRAINT email_unique UNIQUE (email),
   CONSTRAINT name_length CHECK (LENGTH(name) BETWEEN 2 AND 30)
);

CREATE TABLE Book (
   id int GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
   title TEXT NOT NULL,
   author TEXT NOT NULL,
   year int NOT NULL,
   person_id int REFERENCES Person(id) ON DELETE SET NULL
);